server {
  listen 80;

  # Health endpoints (оба варианта)
  location = /health { proxy_pass http://server:3000/health; }
  location = /api/health { proxy_pass http://server:3000/api/health; }

  # Swagger (оба варианта)
  location /docs { proxy_pass http://server:3000/docs; }
  location /api/docs { proxy_pass http://server:3000/api/docs; }

  # API without prefix -> pass-through
  location / {
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    proxy_pass http://server:3000;
  }
}
